/*!
website_v2 - v2.0.0
@nicolasbrugneaux.me - scripts.min.js
2014-03-17
*/

(function(){"use strict";var create_dynamic_menu,myApp,slide_notifications;myApp=angular.module("myApp",["ngProgress","ngSanitize","myApp.controllers","myApp.filters","myApp.services","myApp.directives"]),myApp.factory("sharedProperties",function($rootScope){var list,sharedProperties;return sharedProperties={},list={},sharedProperties.get=function(name){return list[name]},sharedProperties.set=function(name,value){return list[name]=value,$rootScope.$broadcast(name.concat("Event"),list)},sharedProperties.all=function(){return list},sharedProperties}),myApp.config(function($routeProvider,$locationProvider){return $routeProvider.when("/",{templateUrl:"partials/home",controller:"HomeCtrl"}),$routeProvider.when("/about",{templateUrl:"partials/about",controller:"AboutCtrl"}),$routeProvider.when("/skills",{templateUrl:"partials/skills",controller:"SkillsCtrl"}),$routeProvider.when("/contact",{templateUrl:"partials/contact",controller:"ContactCtrl"}),$routeProvider.when("/blog",{templateUrl:"partials/blog",controller:"BlogCtrl"}),$routeProvider.when("/blog/article/:slug",{templateUrl:"partials/article",controller:"ArticleCtrl"}),$routeProvider.otherwise({redirectTo:"/"}),$locationProvider.html5Mode(!0)}),myApp=angular.module("myApp.controllers",[]),myApp.controller("AppCtrl",["$scope","$rootScope","sharedProperties","progressbar",function(){}]),myApp.controller("MainCtrl",["$scope","$rootScope","sharedProperties","$location","progressbar",function($scope,$rootScope,sharedProperties,$location){return $scope.init=function(){return slide_notifications(),create_dynamic_menu()},$scope.data={location:$location,info:{email:"nicolas.brugneaux@gmail.com",author:"Nicolas Brugneaux",date_creation:new Date("October 1, 2013"),repository:"https://github.com/nicolasbrugneaux/website_v2",name:"nicolasbrugneaux.me",phone:"+336 42 24 38 46",skype:"nicolas.brugneaux",photo:"https://graph.facebook.com/nicolas.brugneaux/picture?width=140&height=140"},links:{social:[{name:"Twitter",link:"https://twitter.com/nbrugneaux","class":"twitter"},{name:"Github",link:"https://github.com/nicolasbrugneaux","class":"github"},{name:"Facebook",link:"https://facebook.com/nicolas.brugneaux","class":"facebook"},{name:"LinkedIn",link:"http://www.linkedin.com/profile/view?id=267950653","class":"linkedin"}],navigation:[{name:"Home",link:"/"},{name:"About",link:"/about"},{name:"Skills",link:"/skills"},{name:"Contact",link:"/contact"},{name:"Blog",link:"/blog"}]}}}]),create_dynamic_menu=function(){var closeClickFn,menu,menu_links,overlay,resetMenu,trigger;return menu=$("#bt-menu"),trigger=$("#bt-menu a.bt-menu-trigger"),overlay=$("<div>").addClass("bt-overlay"),menu_links=$("#bt-menu ul.nav-menu"),menu.append(overlay),resetMenu=function(){return $("#bt-menu").removeClass("bt-menu-open"),$("#bt-menu").addClass("bt-menu-close")},closeClickFn=function(){return resetMenu(),overlay.off("click",closeClickFn)},trigger.on("click",function(ev){return ev.stopPropagation(),ev.preventDefault(),$("#bt-menu").hasClass("bt-menu-open")?resetMenu():($("#bt-menu").removeClass("bt-menu-close"),$("#bt-menu").addClass("bt-menu-open"),overlay.on("click",closeClickFn),menu_links.on("click","li",closeClickFn))})},slide_notifications=function(){return 1===$(".notifications").children().size()?$(".notifications").hide():$(".notifications").slideUp(0).slideDown(150).delay(5e3).slideUp(150)},myApp.controller("HomeCtrl",["$scope","$rootScope","sharedProperties","$location","progressbar",function($scope,$rootScope,sharedProperties,$location,progress){return progress.start(),$scope.data.location=$location,setTimeout(function(){return $(".has-tooltip").tooltip(),progress.complete()},500)}]),myApp.controller("AboutCtrl",["$scope","$rootScope","sharedProperties","$location","progressbar",function($scope,$rootScope,sharedProperties,$location,progress){return progress.start(),$scope.data.location=$location,setTimeout(function(){return $(".has-tooltip").tooltip(),progress.complete()},500)}]),myApp.controller("SkillsCtrl",["$scope","$rootScope","sharedProperties","$location","progressbar",function($scope,$rootScope,sharedProperties,$location,progress){return progress.start(),$scope.data.location=$location,setTimeout(function(){return $(".has-tooltip").tooltip(),progress.complete()},500)}]),myApp.controller("ContactCtrl",["$scope","$rootScope","sharedProperties","$location","progressbar",function($scope,$rootScope,sharedProperties,$location,progress){return progress.start(),$scope.data.location=$location,setTimeout(function(){return $(".has-tooltip").tooltip(),progress.complete()},500)}]),myApp.controller("BlogCtrl",["$scope","$rootScope","sharedProperties","$location","progressbar","$http",function($scope,$rootScope,sharedProperties,$location,progress,$http){return $scope.data.location=$location,$scope.blog={articles:[],no_more_article:!1,last:0,limit:4},$scope.init=function(){return $scope.search($scope.blog.last,$scope.blog.limit)},$scope.search=function(offset,limit){var query;return $scope.blog.no_more_article?void 0:(progress.start(),query=$http.get("/api/blog?offset="+offset+"&limit="+limit).then(function(response){var article,_i,_len,_ref;for(_ref=response.data.articles,_i=0,_len=_ref.length;_len>_i;_i++)article=_ref[_i],$scope.blog.articles.push(0===$scope.blog.articles.length?{article:article,body_display:""+article.body.substr(0,500)+"..."}:{article:article,body_display:""+article.body.substr(0,250)+"..."});return response.data.articles.length<4&&($scope.blog.no_more_article=!0),$scope.blog.last+=response.data.articles.length,progress.complete(),$(".has-tooltip").tooltip()},function(response){return console.log("An error has occurred: "+response),progress.complete()}))}}]),myApp.controller("ArticleCtrl",["$scope","$rootScope","sharedProperties","$location","progressbar","$http","$routeParams",function($scope,$rootScope,sharedProperties,$location,progress,$http,$routeParams){return $scope.data.location=$location,$scope.article={article:void 0,validated_once:!1,add_comment:{author:"",email:"",body:"",id:void 0}},$scope.init=function(){return $scope.view()},$scope.view=function(){var query;return progress.start(),query=$http.get("/api/article/"+$routeParams.slug).then(function(response){return $scope.article.article=response.data,$scope.article.add_comment.id=response.data._id,progress.complete(),$(".has-tooltip").tooltip(),console.log($scope.article)},function(response){return console.log("An error has occurred: "+response),progress.complete()})},$scope.add_comment=function(){var query;return $scope.article.validated_once=!0,console.log($scope.article),""!==$scope.article.add_comment.author&&""!==$scope.article.add_comment.email&&""!==$scope.article.add_comment.body?(progress.start(),query=$http.post("api/article/comment/",$scope.article.add_comment).then(function(response){return $scope.article.article.comments=response.data.comments,$scope.article.add_comment.author="",$scope.article.add_comment.email="",$scope.article.add_comment.body="",$scope.article.validated_once=!1,progress.complete()},function(response){return console.log("An error has occured: "+response.data),$scope.article.validated_once=!1,progress.complete()})):void 0}}]),myApp=angular.module("myApp.directives",[]),myApp.directive("appVersion",function(version){return function(scope,elm){return elm.text(version)}}),myApp=angular.module("myApp.filters",[]),myApp.filter("interpolate",function(version){return function(text){return String(text).replace(/\%VERSION\%/gm,version)}}),myApp=angular.module("myApp.services",[]),myApp.value("version","0.1")}).call(this);
//# sourceMappingURL=./app/static/scripts/scripts.min.map